
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <link rel='stylesheet' href='https://chinese-fonts-cdn.deno.dev/packages/lxgwwenkai/dist/LXGWWenKai-Bold/result.css' />
  <link rel='stylesheet' href='https://chinese-fonts-cdn.deno.dev/packages/jhlst/dist/%E4%BA%AC%E8%8F%AF%E8%80%81%E5%AE%8B%E4%BD%93v2_002/result.css' />  
  


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PHP过滤 [ 光田云恒 ]</title>

  <link rel="icon" href="/MYBLOG/img/favicon.ico">


    <meta name="author" content="光田云恒">


    <meta name="subtitle" content="技术 · 安全 · 随笔">


    <meta name="Description" content="记录代码、渗透、随想">



  <link rel="alternate" href="/MYBLOG/atom.xml " title="光田云恒" type="application/atom+xml">


  
    <link rel="stylesheet" href="/MYBLOG/css/main.css">
  


<!-- CbSearch 依赖 Bootstrap CSS -->
<link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css">


<script defer>
  // 离开页面时标题变“光田云恒”，返回页面时标题恢复
//   document.addEventListener('visibilitychange', function () {
//   if (document.visibilityState == 'hidden') {
//       normal_title = document.title;
//       document.title = '光田云恒';
//   } else document.title = normal_title;
// });

</script>
  <body data-theme="light" class="notransition">
    <script defer>
      const body = document.body;
      const data = body.getAttribute("data-theme");
      const initTheme = (state) => {
        if (state === "dark") {
          body.setAttribute("data-theme", "dark");
        } else if (state === "light") {
          body.removeAttribute("data-theme");
        } else {
          localStorage.setItem("theme", data);
        }
      };
   
      initTheme(localStorage.getItem("theme"));
      
      setTimeout(() => body.classList.remove("notransition"), 75);
    </script>
  <div class="navbar" role="navigation">
  <nav class="menu">
    <input type="checkbox" id="menu-trigger" class="menu-trigger" />
    <label for="menu-trigger">
      <span class="menu-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 512 512"
        >
          <path
            d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"
          />
        </svg>
      </span>
    </label>
    <a id="mode">
      <svg
        class="mode-sunny"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 512 512"
      >
        <title>LIGHT</title>
        <line
          x1="256"
          y1="48"
          x2="256"
          y2="96"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="256"
          y1="416"
          x2="256"
          y2="464"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="403.08"
          y1="108.92"
          x2="369.14"
          y2="142.86"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="142.86"
          y1="369.14"
          x2="108.92"
          y2="403.08"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="464"
          y1="256"
          x2="416"
          y2="256"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="96"
          y1="256"
          x2="48"
          y2="256"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="403.08"
          y1="403.08"
          x2="369.14"
          y2="369.14"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="142.86"
          y1="142.86"
          x2="108.92"
          y2="108.92"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <circle
          cx="256"
          cy="256"
          r="80"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
      </svg>
      <svg
        class="mode-moon"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 512 512"
      >
        <title>DARK</title>
        <line
          x1="256"
          y1="48"
          x2="256"
          y2="96"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="256"
          y1="416"
          x2="256"
          y2="464"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="403.08"
          y1="108.92"
          x2="369.14"
          y2="142.86"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="142.86"
          y1="369.14"
          x2="108.92"
          y2="403.08"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="464"
          y1="256"
          x2="416"
          y2="256"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="96"
          y1="256"
          x2="48"
          y2="256"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="403.08"
          y1="403.08"
          x2="369.14"
          y2="369.14"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <line
          x1="142.86"
          y1="142.86"
          x2="108.92"
          y2="108.92"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
        <circle
          cx="256"
          cy="256"
          r="80"
          style="
            stroke-linecap: round;
            stroke-miterlimit: 10;
            stroke-width: 32px;
          "
        />
      </svg>
    </a>
    <!-- 已移除：靠近深/浅色切换的冗余搜索按钮与悬浮搜索面板（按需求可恢复） -->
    <div class="trigger">
      <div class="trigger-container">
        <!-- 菜单项 -->
            
        <a class="menu-link " href="/MYBLOG/"
          > 主页</a
        >
            
        <a class="menu-link " href="/MYBLOG/tags/"
          > 标签</a
        >
            
        <a class="menu-link " href="/MYBLOG/categories/"
          > 类别</a
        >
            
        <a class="menu-link " href="/MYBLOG/archives/"
          > 档案馆</a
        >
            
        <a class="menu-link " href="/MYBLOG/about/"
          > 关于</a
        >
        
      </div>
    </div>
  </nav>
</div>

  <button id="toTopBtn"><i class="fa-solid fa-hand-point-up " ></i></button>
<button id="toggleButton"><i class="fa-solid fa-chart-bar " ></i></button>
<div id="overlay" class="overlay">
  <div class="content">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">一、convert 系列（最常用）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">1. convert.base64-encode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">2. convert.base64-decode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">3. convert.quoted-printable-encode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">4. convert.quoted-printable-decode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">5. convert.iconv.*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">二、string 系列（文本转换）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">6. string.rot13</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">7. string.tolower</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">8. string.toupper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">9. string.strip_tags</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10. string.strip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">11. string.trim</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">三、zlib 流系列（压缩类）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">12. zlib.inflate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">13. zlib.deflate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">14. zlib.encode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">15. zlib.decode</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">四、string.__ 多字符替换系列*（很少有人知道）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">16. string.camelize</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">17. string.capitalize</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">18. string.lowercase</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">19. string.uppercase</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">五、特殊或冷门但可玩性极高的过滤器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">20. convert.iconv.UCS-4LE.UTF-8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">21. convert.iconv.UTF-8.UTF-7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">22. string.strip_low</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">23. string.strip_high</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">六、组合过滤器（真正的黑魔法）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">七、终极必杀技：链式 filter 评论执行绕过（真正危险）</span></a></li></ol>
    <button id="closeButton"><i class="fa-solid fa-circle-xmark"></i></button>
  </div>
</div>
<div class="wrapper post">
  <head>
    <!-- 引入 Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <meta name="generator" content="Hexo 8.1.1"></head>



  <main class="page-content" aria-label="Content">
      <header class="header">
        
          <div class="tags">
            <a href="/MYBLOG/tags/PHP/" class="tag"># PHP</a><a href="/MYBLOG/tags/%E8%BF%87%E6%BB%A4/" class="tag"># 过滤</a>
          </div>
        
        <h1 class="header-title" itemprop="headline">PHP过滤</h1>
          <div class="post-meta">
            最后更新: <time>2025年11月25日</time>
            作者: <span itemprop="author">
              <span itemprop="name">光田云恒</span>
            </span>
            字数: <span class="post-count">740</span>
            预计阅读时间: <span class="post-count">3min</span> 
          </div>       
        </header>
          <div class="page-content"><h2>一、convert 系列（最常用）</h2>
<h3>1. convert.base64-encode</h3>
<p>用途：读取 PHP 源码</p>
<pre><code class="language-plain">php://filter/read=convert.base64-encode/resource=index.php
</code></pre>
<h3>2. convert.base64-decode</h3>
<p>用途：写入文件时用于反向解密 payload（配合 write 模式）</p>
<h3>3. convert.quoted-printable-encode</h3>
<p>用途：输出编码后的文本，绕某些过滤器</p>
<h3>4. convert.quoted-printable-decode</h3>
<p>用途：有时用于 payload 构造（较少见）</p>
<h3>5. convert.iconv.*</h3>
<p>把字符集转换，比如：</p>
<pre><code class="language-plain">convert.iconv.UTF-7.UTF-8
convert.iconv.utf-8.utf-16le
</code></pre>
<p>用途：绕字符过滤、绕黑名单<br>
例子：UTF-7 绕过滤器，导致 payload “变相逃脱”过滤。</p>
<h2>二、<strong>string 系列（文本转换）</strong></h2>
<h3>6. string.rot13</h3>
<p>用途：输出 ROT13 变换后的文本，少见但可玩</p>
<h3>7. string.tolower</h3>
<p>用途：把文件内容全部变成小写<br>
例子：绕大小写过滤器</p>
<h3>8. string.toupper</h3>
<p>用途：同上，把内容变成大写</p>
<h3>9. string.strip_tags</h3>
<p>用途：移除 HTML 标签<br>
攻击场景有限</p>
<h3>10. string.strip</h3>
<p>用途：去掉空格等字符</p>
<h3>11. string.trim</h3>
<p>用途：裁剪前后空白字符</p>
<p>这些在题目中 <strong>有时用于绕过滤器对关键字的匹配</strong>（特别是大小写敏感时）。</p>
<h1>三、<strong>zlib 流系列（压缩类）</strong></h1>
<h3>12. zlib.inflate</h3>
<p>用途：解压 DEFLATE</p>
<h3>13. zlib.deflate</h3>
<p>用途：压缩成 DEFLATE</p>
<h3>14. zlib.encode</h3>
<h3>15. zlib.decode</h3>
<p>用途同上，某些服务器上有奇奇怪怪的文件压缩策略时可以利用</p>
<h1>四、<em>string.__ 多字符替换系列</em>*（很少有人知道）</h1>
<h3>16. string.camelize</h3>
<h3>17. string.capitalize</h3>
<h3>18. string.lowercase</h3>
<h3>19. string.uppercase</h3>
<p>这些不常用于攻击，但在绕黑名单时有奇效。<br>
例如黑名单禁止 <code>&quot;php&quot;</code>，但你可以：</p>
<pre><code class="language-plain">php://filter/read=string.uppercase/resource=phP.php
</code></pre>
<p>把文件内容强制转换为大写，返回源码不受影响。</p>
<h1>五、<strong>特殊或冷门但可玩性极高的过滤器</strong></h1>
<h3>20. convert.iconv.UCS-4LE.UTF-8</h3>
<p>用途：字符字节分离技巧<br>
（在某些题目里可以利用多字节字符绕关键词检测）</p>
<h3>21. convert.iconv.UTF-8.UTF-7</h3>
<p>用途：UTF-7 常用于绕过 <code>&lt;script&gt;</code> 过滤或关键字过滤<br>
在 LFI 中有时能“变形”敏感关键字</p>
<h3>22. string.strip_low</h3>
<p>用途：去掉 ASCII &lt;32 的字符<br>
有时可以让 payload“洗干净”</p>
<h3>23. string.strip_high</h3>
<p>用途：去掉 ASCII &gt;127 的字符<br>
常用于 Unicode 绕过攻击链</p>
<h1>六、<strong>组合过滤器（真正的黑魔法）</strong></h1>
<p>过滤器可以无限连，用 <code>|</code> 组合：</p>
<pre><code class="language-plain">php://filter/read=string.toupper|string.rot13|convert.base64-encode/resource=index.php
</code></pre>
<p>你会得到：</p>
<ol>
<li>index.php → 转大写</li>
<li>再 rot13</li>
<li>最后 base64 编码输出</li>
</ol>
<p>组合可以帮助：</p>
<ul>
<li>绕 WAF</li>
<li>绕黑名单</li>
<li>让敏感字符变成“无害”的样子</li>
<li>混淆源码</li>
<li>躲避简单检测</li>
</ul>
<h1>七、终极必杀技：链式 filter 评论执行绕过（真正危险）</h1>
<p>很多 CTF 里用：</p>
<pre><code class="language-plain">php://filter/string.rot13/resource=php://input
</code></pre>
<p>配合 POST 数据 rot13 编码后的 payload：<br>
你就能让 PHP <strong>执行解码后的 payload</strong><br>
→ 直接 RCE</p>
<p>例如 payload rot13 后变成 <code>cevags(&quot;hello&quot;);</code><br>
（rot13 的 print）</p>
<p>传入 filter → 还原成 print → 执行。</p>
<p>这就是经典的 <strong>php://input RCE + filter 解码</strong>。</p>
</div>          
          <nav class="post-nav">
    
    <a class="post-nav-item post-nav-prev" href="/MYBLOG/2025/11/22/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/Hexo%20%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/">
      <div class="nav-arrow">&lt;&nbsp;NEWER</div>
      <span class="post-title">Hexo 项目结构</span>
    </a>
    
    
    <a class="post-nav-item post-nav-next" href="/MYBLOG/2025/11/22/PHP/PHP%E6%94%AF%E6%8C%81%E7%9A%84%E7%BC%96%E7%A0%81/">
      <div class="nav-arrow">OLDER&nbsp;&gt;</div>
      <span class="post-title">PHP支持的编码</span>
    </a>
    
  </nav>

   </main>
</div>

  <footer class="footer">
  <small class="footer_copyright">
    <div id="bottom-inner">
      © Site by 光田云恒<br>

    </div>
  </small>
</footer>

<!-- jQuery -->
<script src="//cdn.bootcss.com/jquery/2.2.2/jquery.min.js"></script>

<!-- Bootstrap 核心 JS -->
<script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>



    
      <script src="/js/main.js"></script>
    
  
  <script>
    window.FPConfig = {
      delay: 0,
      ignoreKeywords: [],
      maxRPS: 3,
      hoverDelay: 50,
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
  document.body.classList.add('loaded');
});

  </script>
</body>
</html>
